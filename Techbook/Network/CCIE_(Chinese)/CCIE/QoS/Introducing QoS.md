# Introducing QoS

Introducing QoS

2011年7月7日

15:23

**QoS是一种改进网络性能的方法。**

**切记：QoS是在拥塞的时候才起作用**

**QOS的五大功能：**

**1、分类和标记 classfication and marking**

**2、拥塞管理与避免 congestion management and avoidance**

**3、监管和整形 policing and shaping**

**4、链路效率 link efficiency**

**5、信令 signaling**

**QoS主要关心的是带宽，延迟，抖动（最简单的理解就是延迟是可变的）和丢包率的问题。**

**带宽：注意带宽和吞吐量的区别。带宽是指理论上的速率，吞吐量是指实际的速率。正常情况下，吞吐量<=带宽**

**延迟：分为4种**

**处理延迟（Processing delay）：路由器或三层交换机在入口收到一个包，然后检查，再放到出口的出向队列所花的时间，通常影响的因素有：CPU速度、CPU利用率、IP交换模式、路由器架构以及出口和入口上配置的features**

**队列延迟（Queuing delay）：分组在路由器的出向队列中存在的时间**

**串行延迟（Serialization delay）：把分组转化成物理链路上的bit所花的时间**

**传输延迟（Propagation delay）：分组从链路的一端传输到另外一端所花费的时间**

**所谓的端到端延迟（End-to-end delay）是这4者的和。**

**在尽力而为的模型中，串行延迟和传输延迟是固定的，而处理延迟和队列延迟是可变的。**

**抖动=忽快忽慢**

**丢包率：在重度拥塞的时候才会出现。**

**QoS把拥塞分成轻度拥塞和重度拥塞。轻度拥塞使用的是队列技术，重度拥塞使用的是丢弃技术。**

**轻度拥塞：拥塞管理，使用队列技术**

**重度拥塞：拥塞避免，使用丢弃技术**

**不执行QoS的网络在轻度拥塞的时候用的是FIFO（先进先出），重度拥塞的时候用的是尾丢弃。**

**QoS的3种模型（Model）：**

**1. 尽力而为的模型（Best effort）：没有布置QoS(FIFO,尾丢弃)**

**2. 集中式服务模型（IntServ）：使用RSVP协议，为了满足新出现的各种语音/视频等应用程序的需求**

**3. 区分式服务模型（DiffServ）：克服前两种模型的缺点 ----*目前Qos都使用此模型**

**克服前两者的缺点，网络流量可以通过类来标识，可以为每一个类选择不同的服务级别**

**尽力而为的模型：不区分音频，视频，数据等，所有数据包一致对待。**