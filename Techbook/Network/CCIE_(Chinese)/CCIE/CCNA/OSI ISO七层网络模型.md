# OSI ISO七层网络模型

OSI/ISO七层网络模型

2009年9月4日

19:22

> 1、ISO:国际标准化组织 ( International Organization for Standardization )
> 
> 
> 全球性的非政府组织，是国际标准化领域中一个十分重要的组织。
> 
> OSI:开放式系统互联 ( open system interconnection )
> 
> 开放，是指非垄断的。系统是指现实的系统中与互联有关的各部分。
> 
> 20世纪70年代后期，ISO创建OSI参考模型，希望不同供应商的网络能够相互协同工作，但迄今为止，这仍然是一个伟大的目标！
> 
> **参考资料：**
> 
> **世界上第一个网络体系结构由IBM公司提出（1974年），以后其他公司也相继推出自己的网络体系结构，如：Digital公司的DNA，美国国防部的TCP/IP等，多种网络体系结构并存，其结果是若采用IBM的结构，只能选用IBM的产品，只能与同种结构的网络互联。**
> 
> **为了促进计算机网络的发展，国际标准化组织ISO于1977年成立了一个委员会，在现在所有网络的基础上，提出了不基于具体机型、操作系统或公色的网络体系结构，成为开放系统互联模型。**
> 
> 2、层 layer
> 
> 描述了所有需求的有效的通讯过程，并把这些过程逻辑上的组叫做层。
> 
> 分层的优点：
> 
1. 促进标准化工作,允许各个供应商进行开发.
2. 各层间相互独立,把网络操作分成低复杂性单元.
3. 灵活性好,某一层变化不会影响到别层，设计者可专心设计和开发模块功能.
4. 各层间通过一个接口在相邻层上下通信.

> 
> 
> 
> 3、OSI 模型（每一层作用和应用）
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image1.png](OSI%20ISO七层网络模型/image1.png)
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image2.png](OSI%20ISO七层网络模型/image2.png)
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image3.png](OSI%20ISO七层网络模型/image3.png)
> 
> **为方便记忆可以将七层从高到低视为：**
> 
> **All People Seem To Need Data Processing .**
> 
> **OSI将整个通信功能划分为七个层次，划分层次的主要原则是：**
> 
> ●网中各结点都具有相同的层次；
> 
> ●不同结点的同等层具有相同的功能；
> 
> ●同一结点内相邻层之间通过接口通信；
> 
> **●每一层可以使用下层提供的服务，并向其上层提供服务，**
> 
> **●不同结点的同等层通过协议来实现对等层之间的通信**。
> 
> **OSI参考模型各层的功能概览**
> 
> **1）物理层**：物理层(Physical layer)是参考模型的最低层。该层是网络通信的数据传输介质，由连接不同结点的电缆与设备共同构成。主要功能是：利用传输介质为数据链路层提供物理连接，负责处理数据传输并监控数据出错率，以便数据流的透明传输。示例：Rj45，802.3等。
> 
> **2）数据链路层**：数据链路层(Data link layer)是参考模型的第2层。 主要功能是：在物理层提供的服务基础上，在通信的 实体间建立数据链路连接，传输以“帧”为单位的数据包，并采用**差错控制**与**流量控制**方法，示例：ATM，FDDI等。
> 
> 插：为何要成帧？将比特流划分成块数据，以便进行底层流量和差错的控制
> 
> 差错控制：
> 
> <<ARQ简介.docx>>
> 
> **ARQ：**
> 
> **停等ARQ（自动请求重传）**
> 
> **后退N帧ARQ协议**
> 
> **选择重发ARQ协议**
> 
> **参考资料**：
> 
> 在原始的物理传输线路上传输数据信号是有差错的。
> 
> 传输线路是由传输介质与设备组成的。
> 
> 原始的物理传输线路是指没有采用高层差错控制的基本的物理传输介质与设备。
> 
> 描述物理传输线路上传输数据信号出现差错多少的参数为误码率。
> 
> 误码率是指二进制比特在数据传输过程中被传错的概率，它在数值上等于被传错的比特数和传输的比特总数的比值。
> 
> 设计数据链路层的主要目的就是在原始的、有差错的物理传输线路的基础上，采取差错检测、差错控制与流量控制等方法
> 
> **参考资料**
> 
> **成帧（帧同步）**
> 
> 为了向网络层提供服务，数据链路层必须使用物理层提供的服务。物理层是以比特流进行传输的，这种比特流并不保证在数据传输过程中没有错误，接收到的位数量可能少于、等于或者多于发送的位数量。而且它们还可能有不同的值，这时数据链路层为了能实现数据有效的差错控制，就采用了一种“帧”的数据块进行传输。而要采用帧格式传输，就必须有相应的帧同步技术，这就是数据链路层的“成帧”（也称为“帧同步”）功能。
> 
> 采用帧传输方式的好处是，在发现有数据传送错误时，只需将有差错的帧再次传送，而不需要将全部数据的比特流进行重传，这就在传送效率上将大大提高。但同时也带来了两方面的问题：（1）如何识别帧的开始与结束；（2）在夹杂着重传的数据帧中，接收方在接收到重传的数据帧时是识别成新的数据帧，还是识别成已传帧的重传帧呢？这就要靠数据链路层的各种“帧同步”技术来识别了。
> 
> “帧同步”技术既可使接收方能从以上并不是完全有序的比特流中准确地区分出每一帧的开始和结束，同时还可识别重传帧。
> 
> **差错控制**
> 
> 在数据通信过程可能会因物理链路性能和网络通信环境等因素，难免会出现一些传送错误，但为了确保数据通信的准确，又必须使得这些错误发生的机率尽可能低。这一功能也是在数据链路层实现的，就是它的“差错控制”功能。
> 
> 在数字或数据通信系统中，通常利用抗干扰编码进行差错控制。**一般分为4类：前向纠错（FEC）、反馈检测（ARQ）、混合纠错（HEC）和信息反馈（IRQ）**。
> 
> **流量控制**
> 
> 在双方的数据通信中，如何控制数据通信的流量同样非常重要。它既可以确保数据通信的有序进行，还可避免通信过程中不会出现因为接收方来不及接收而造成的数据丢失。这就是数据链路层的“流量控制”功能。数据的发送与接收必须必须遵循一定的传送速率规则，可以使得接收方能及时地接收发送方发送的数据。并且当接收方来不及接收时，就必须及时控制发送方数据的发送速率，使两方面的速率基本匹配。
> 
> **链路管理**
> 
> 数据链路层的“链路管理”功能包括数据链路的建立、链路的维持和释放三个主要方面。当网络中的两个结点要进行通信时，数据的发送方必须确知接收方是否已处在准备接受的状态。为此通信双方必须先要交换一些必要的信息，以建立一条基本的数据链路。在传输数据时要维持数据链路，而在通信完毕时要释放数据链路。
> 
> **MAC寻址**
> 
> 这是数据链路层中的MAC子层主要功能。这里所说的“寻址”与“IP地址寻址”是完全不一样的，因为此处所寻找地址是计算机网卡的MAC地址，也称“物理地址”、“硬件地址”，而不是IP地址。在以太网中，采用媒体访问控制（Media Access Control, MAC）地址进行寻址，MAC地址被烧入每个以太网网卡中。这在多点连接的情况下非常必需，因为在这种多点连接的网络通信中，必须保证每一帧都能准确地送到正确的地址，接收方也应当知道发送方是哪一个站。
> 
> **区分数据与控制信息**
> 
> 由于数据和控制信息都是在同一信道中传输，在许多情况下，数据和控制信息处于同一帧中，因此一定要有相应的措施使接收方能够将他们区分开来，以便向上传送仅是真正需要的数据信息。
> 
> **3）网络层**：网络层(Network layer)是参考模型的第3层。主要功能是：为数据在结点之间传输创建逻辑链路，通过路由选择算法为分组通过通信子网选择最适当的路径，以及实现拥塞控制、网络互联等功能。 示例：IP,IPX等。
> 
> **4）传输层**：传输层(Transport layer)是参考模型的第4层。主要功能是向用户提供可靠的端到端(End-to-End)服务，处理数据包错误、数据包次序 ，以及其他一些关键传输问题。传输层向高层屏蔽了下层数据通信的细节，因此，它是计算机通信体系结构中关键的一层。示例：TCP，UDP，SPX。
> 
> **5）会话层**：会话层(Session layer)是参考模型的第5层。主要功能是：负责维扩两个结点之间的传输链接，以便确保点到点传输不中断，以及管理数据交换等功能。 示例：RPC，SQL等。
> 
> **6）表示层**：表示层(Presentation layer)是参考模型的第6层。主要功能是：用于处理在两个通信系统中交换信息的表示方式，主要包括数据格式变换、数据加密与解密、数据压缩与恢复等功能。 示例：加密，ASII等。
> 
> **7）应用层**：应用层(Application layer)是参考模型的最高层。主要功能是：为应用软件提供了很多服务，例如文件服务器、数据库服务、电子邮件与其他网络软件服。示例：telnet，HTTP,FTP,WWW,NFS,SMTP等。
> 
> 4、PDU（protocol data unit):每一层使用自己层的协议和别的系统的对应层相互通信，协议层的协议在对等层之间交换的信息叫协议数据单元。
> 
> 上层 : message（报文）
> 
> transport layer : segment（段）
> 
> Network layer: packet（包）
> 
> Data-link layer: Frame （帧）
> 
> Physical layer: bit（比特）
> 
> **参考资料：**
> 
> **将信息从一层传送到下—层是通过命令方式实现的，这里的命令称为原语(Primitive)。被传送的信息称为协议数据单元(PDU，Protocol Data Unit)。在PDU进入下层之前，会在PDU中加入新的控制信息，这种控制信息称为PCI(Protocol Control Information)。接下来，会在PDU中加入发送给下层的指令，这些指令称为接口控制信息(ICI，Interface Control Information)。PDU、PCI与ICI共同组成了接口数据单元(IDU，Interface Data Unit)。下层接收到IDU后，就会就从IDU中去掉ICI，这时的数据包被称为服务数据单元(SDU，Service Data Unit)。随着SDU一层层向下传送，每一层都要加入自己的信息。**
> 
> 5、封装与解封装
> 
> 封装 （ encapsulate/encapsulation）：数据要通过网络进行传输，要从高层一层一层的向下传送，如果一个主机要传送数据到别的主机，先把数据装到一个特殊协议报头中，这个过程叫-----封装
> 
> 封装分为：切片和加控制信息
> 
> 解封装：上述的逆向过程
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image4.png](OSI%20ISO七层网络模型/image4.png)
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image5.png](OSI%20ISO七层网络模型/image5.png)
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image6.png](OSI%20ISO七层网络模型/image6.png)
> 
> 6、层要点
> 
> **一** **物理层**：
> 
> 1）、定义介质类型、连接器设备、信令类型、电气参数，机械特性等
> 
> **常见标准： Ethernet、IEEE802.3、EIA/TIA-232**
> 
> 补充： **IEEE** （Institute of Electrical and Electronics Engineers）美国电气和电子工程师协会
> 
> 802.1局域网概述
> 
> 802.2 LLC
> 
> 802.3总线网以及CSMA/CD
> 
> 802.4令牌总线
> 
> 802.5令牌环
> 
> 802.6DQDB城域网
> 
> 802.8光纤网
> 
> 802.11无线网
> 
> 2)、连接设备
> 
> 集线器 （HUB）：多端口的中继器
> 
> 中继器（Repeater）：信号再生和放大
> 
> 编码解码器
> 
> 传输介质连接器
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image7.png](OSI%20ISO七层网络模型/image7.png)
> 
> 注： 集线器 （HUB）：所有设备在同一冲突域、广播域、所有设备共享相同带宽。
> 
> 冲突 （collision）：在以太网中，当两个节点同时传输数据时，从两个设备发出的帧将会碰撞，在物理介质上相遇，彼此数据都会被破坏。接入设备越多冲突几率越大。
> 
> 冲突域（collision domain）一个支持共享介质的网段。
> 
> 广播域 (broadcast domain)：广播帧传输的网络范围，一般是路由器来设定边界（因为router不转发广播）。
> 
> 物理层设备不隔离冲突域和广播域
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image8.png](OSI%20ISO七层网络模型/image8.png)
> 
> **二** **数据链路层（数据成帧）**
> 
> 1）、定义了：
> 
> 源和目标的物理地址 （MAC）
> 
> 与帧关联的高层协议 (Service Access Point)
> 
> 网络拓扑
> 
> 帧顺序
> 
> 数据流控制
> 
> 有向或无向连接
> 
> **数据链路层的分层结构及各自作用**
> 
> 在常见的IEEE 802系列标准中，将数据链路层分为两个部分：
> 
> （**1）逻辑链接控制（Logical Link Control，LLC）子层；**
> 
> （**2）媒体访问控制（Medium Access Control，MAC）子层**。
> 
> (1) LLC子层（logical link control):为上层协议提供SAP 服务访问点，并为数据加上控制信息。
> LLC子层协议：**802.2802.2协议只在LLC子层，为以太网和令牌环网提供了通用功能**。
> 
> **SAP（ Service Access Point服务访问点）：**
> 
> 注：SAP之所以存在：LLC子层为了网络层的各种协议提供服务，而上层可能运行不同协议，为区分不同上层协议的数据，要采用服务访问点
> 
> **LLC子层的主要工作是控制信号交换、数据流量控制（Data Flow Control），解释上层通信协议传来的命令并且产生响应，以及克服数据在传送的过程中所可能发生的种种问题（如数据发生错误，重复收到相同的数据，接收数据的顺序与传送的顺序不符等）。**在LLC子层方面，IEEE 802系列标准中只制定了一种标准，各种不同的MAC都使用相同的LLC子层通信标准，使更高层的通信协议可不依赖局域网络的实际架构。
> 
> 不同工作站的网络层通信协议可通过LLC子层来沟通。由于网络层上可能有许多种通信协议同时存在，而且每一种通信协议又可能同时与多个对象沟通，因此当LLC子层从MAC子层收到一个数据包时必须能够判断要送给网络层的哪一个通信协议。为了达到这种功能，LLC子层提供了所谓的“服务点”（Service Access Point，SAP）服务，通过它可以简化数据转送的处理过程。为了能够辨认出LLC子层通信协议间传送的数据属于谁，每一个LLC数据单元（LLC Data Unit）上都有“目的地服务点”
> 
> (2)MAC子层（media access control):负责MAC寻址和定义介质访问控制方法
> 
> MAC子层一般的访问控制方式：
> 
1. **竞争方式**（争用方式），如CSMA/CD，没有确定性，抢到通道就是用，抢不到就不用。
2. **令牌传递方式**（轮流式）：Token Passing，有确定性，那就是拥有令牌的使用通道。
3. **轮询方式**：这种方式也有确定性，网络上的设备被轮询，优先级高的设备拥有使用通道的优先权。

> 
> 
> 
> **MAC子层是制定如何使用传输媒体的通**信协议，如IEEE 802.3以太网标准的CSMA/CD协议中，MAC子层规定如何在总线型网络结构下使用传输媒体；IEEE 802.4令牌总线（Token-Bus）标准中，MAC子层规定了如何在总线的网络结构下利用讯标（Token）控制传输媒体的使用；IEEE 802.5令牌环（Token-Ring）标准中，MAC子层规定了如何在环状网络结构下利用讯标来控制传输媒体的使用；IEEE 802.11无线局域网标准中，MAC子层规定如何在无线局域网络的结构下控制传输媒体的使用。
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image9.png](OSI%20ISO七层网络模型/image9.png)
> 
> MAC地址可采用6字节（48比特）或2字节（16比特）这两种中的任意一种。但随着局域网规模越来越大， 一般都采用6字节的MAC地址。这个48比特都有其规定的意义，前24位是由生产网卡的厂商向IEEE申请的厂商地址，目前的价格是 1000美元买一个地址块，后24位由厂商自行分配，这样的分配使得世界上任意一个拥有48位MAC地址的网卡都有唯一的标识
> 
> 2）常见协议及标准
> 
> Ethernet 以太网802.3 、 HDLC 高级数据链路控制协议、 PPP ( point-to-point protocol ）、Frame-relay（帧中继）、X.25、ADSL、DDN、PSTN 。
> 
> 3）CSMA/CD技术
> 
1. 网络中的计算机室共享同一物理传输通道的，如果没有一定的方法管理计算机使用该传输通道，势必造成数据碰撞，使得哪一台设备也不能通信。媒介访问控制方法可分为3类：
2. 竞争方式（争用方式），如CSMA/CD，没有确定性，抢到通道就是用，抢不到就不用。
3. 令牌传递方式（轮流式）：Token Passing，有确定性，那就是拥有令牌的使用通道。
4. 轮询方式：这种方式也有确定性，网络上的设备被轮询，优先级高的设备拥有使用通道的优先权。
5. **接入设备越多冲突机率越大**
6. **用CSMA/CD技术**

> 
> 
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image10.png](OSI%20ISO七层网络模型/image10.png)
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image11.png](OSI%20ISO七层网络模型/image11.png)
> 
> 概述：
> 载波侦听多路访问/冲突检测 CSMA/CD（carrier sense multiple access/collision detect)：一种介质访问的控制方法，当在同一个共享网络中的不同节点同时传送数据包时，不可避免的会产生冲突，而CSMA/CD机制就是用来解决这种冲突问题。
> 
> 工作原理：
> 
> 当一个节点想在网络中发送数据时，它首先检查线路上是否有其他主机的信号在传送：如果有，说明其他主机在发送数据，自己则利用退避算法等一会再试图发送；如果线路上没有其他主机的信号，自己就将数据发送出去，同时，不停的监听线路，以确信其他主机没有发送数据，如果检测到有其他信号，自己就发送一个JAM阻塞信号，通知网段上的其他节点停止发送数据，这时，其他节点也必须采用退避算法等一会再试图发送。
> 
> 特性：
> 
> **（1）只存在于半双工网络中**:使用 CSMA/CD 协议的以太网不能进行全双工通信而只能进行双向交替通信
> 
> TIPs：
> 
> 双工分类：
> 
> 全双工 双向同时发送数据
> 
> 半双工 双向交替发送数据
> 
> 单工 单向发送数据
> 
> （2）每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性
> 
> （3）信道利用率降低:**这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率**
> 
> 4）、运行的设备
> 
> 交换机（switch）、桥(bridge)。
> 
> 每段有自己冲突域、同一个广播域
> 
> **二层设备隔离冲突域，不隔离广播域**
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image12.png](OSI%20ISO七层网络模型/image12.png)
> 
> **网络层：**
> 
> 1）、功能：
> 
1. （1）定义与指定协议相关联的源和目标逻辑地址

> （2）定义通过网络的路径
> 
1. （3）多链路连接

> （实质：数据转发和路径选择，选路！）
> 
> 
> 协议**：IP、IPX、AppleTalk**
> 
1. 网络层设备隔离广播域

> 
> 
> 
> ![OSI%20ISO%E4%B8%83%E5%B1%82%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%20397e2c8bc29f45f0ac2a7103eba5d3c6/image14.png](OSI%20ISO七层网络模型/image14.png)
> 
> 2）、所运行设备
> 
> **Router （路由器）:**
> 
1. 广播信息控制
2. 多点发送信息控制
3. 路径优化
4. 流量管制
5. 逻辑寻址
6. 提供WAN连接

> 
> 
> 
> **传输层**
> 
> 1）功能：
> 
> 区分不同的上层应用 （端口号来实现的）
> 
> 建立应用间的端到端连接
> 
> 定义流量控制
> 
> 为数据传输提供可靠或不可靠的连接服务
> 
> 数据的分段
> 
> 2）协议：TCP、UDP
> 
> **会话层**
> 
> 用于在源程序和目的程序之间创建并维护对话**创建一个逻辑的连接。**
> 
> **表示层**
> 
> 1）、对应用层数据进行编码与转换，从而确保目的设备可以通过适当的应用程序理解源设备上的数据
> 
> 2）、采用可被目的设备解压缩的方式对数据进行压缩
> 
> 3）、对传输数据进行加密并在目的地解密
> 
> **应用层**
> 
> 提供人机交互的界面
> 
> 7、OSI模型意义：
> 
> 提供了网络间互连的参考模型
> 
> 成为实际网络建模、设计的重要参考工具和理论依据
> 
> OSI/RM的思想为我们提供了进行网络设计与分析的方法
> 
> 缺陷：
> 
> 许多功能在多个层次重复，有冗余感（如流控，差错控制等）
> 
> 各层功能分配不均匀（链路、网络层任务重，会话层任务轻）
> 
> 功能和服务定义复杂，很难产品化。
> 
> OSI的参考模型小结：
> 
> L7-L5被统称为应用层（Application Layers），详分三层：
> 
> L7应用层（Application）：提供用户接口也就是完成应用程序的使用；
> 
> L6表示层（Presentation）：按照应用层的要求进行压缩、加密、翻译等操作；
> 
> L5会话层（Session）：应用程序间的终端连接和会话建立和控制，分隔不同应用程序的数据；
> 
> L5-L1被统称为数据传输层（Data Flow Layers），详分四层：
> 
> L4传输层（Transport）：数据间的传输End-To-End connections，还负责在传输前的数据纠错；
> 
> L3网络层（Network）：网络间的协商，用于路由器间的路由选择；
> 
> L2链路层（Data Link）：路由协议的建立（根据MAC地址），实行错误检测但是不负责更正；
> 
> L1物理层（PhySical）：设备的物理链路连接。
>